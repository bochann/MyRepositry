public class DBMasterManager extends SQLiteOpenHelper {    private static String DB_NAME = "omocha_master";    private static String DB_NAME_ASSET = "omocha_master.db";    private final File databasePath;    private final Context mContext;    public DBMasterManager(Context context) {        super(context, DB_NAME, null, 1);        this.mContext = context;        this.databasePath = context.getDatabasePath(DB_NAME);        try {            this.createEmptyDataBase();        } catch (IOException ioe) {            throw new Error("Unable to create database");        } catch(SQLException sqle){            throw sqle;        }    }    /**     * asset に格納したデータベースをコピーするための空のデータベースを作成する     *     **/    public void createEmptyDataBase() throws IOException{        boolean dbExist = checkDataBaseExists();        if(dbExist){            // すでにデータベースは作成されている        }else{            // このメソッドを呼ぶことで、空のデータベースが            // アプリのデフォルトシステムパスに作られる            this.getReadableDatabase();            try {                // asset に格納したデータベースをコピーする                copyDataBaseFromAsset();            } catch (IOException e){                throw new Error("Error copying database");            }        }    }    /**     * 再コピーを防止するために、すでにデータベースがあるかどうか判定する     *     * @return 存在している場合 {@code true}     */    private boolean checkDataBaseExists() {        SQLiteDatabase checkDb = null;        try{            String dbPath = databasePath.getPath();            checkDb = SQLiteDatabase.openDatabase(dbPath, null,SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.OPEN_READONLY);        }catch(SQLiteException e){            // データベースはまだ存在していない        }        if(checkDb != null){            checkDb.close();        }        return checkDb != null ? true : false;    }    /**     * asset に格納したデーだベースをデフォルトの     * データベースパスに作成したからのデータベースにコピーする     * */    private void copyDataBaseFromAsset() throws IOException{        // asset 内のデータベースファイルにアクセス        InputStream mInput = mContext.getAssets().open(DB_NAME_ASSET);        OutputStream mOutput = new FileOutputStream(databasePath);        // コピー        byte[] buffer = new byte[1024];        int size;        while ((size = mInput.read(buffer)) > 0){            mOutput.write(buffer, 0, size);        }        //Close the streams        mOutput.flush();        mOutput.close();        mInput.close();    }    public SQLiteDatabase openDataBase() throws SQLException{        //Open the database        String myPath = databasePath.getPath();        SQLiteDatabase dataBase = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.OPEN_READONLY);        return dataBase;    }    @Override    public void onCreate(SQLiteDatabase arg0) {    }    @Override    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {    }
    
     //全件取得    public ArrayList getAllAreas(){        SQLiteDatabase db = this.openDataBase();        Cursor cur = db.rawQuery("SELECT * FROM area_master;",null);        ArrayList array = new ArrayList();        cur.moveToFirst();        for (int i = 0; i < cur.getCount(); i++){            ArrayList list = new ArrayList();            //0            list.add(cur.getInt(cur.getColumnIndex("id")));            //1            list.add(cur.getInt(cur.getColumnIndex("zone_id")));            //2            String str1 = cur.getString(cur.getColumnIndex("name"));            if(str1 == null){                list.add("");            }else{                list.add(str1);            }            //3            list.add(cur.getInt(cur.getColumnIndex("quest_count")));            array.add(list);            cur.moveToNext();        }        cur.close();        db.close();        return array;    }    //IDで指定する    public ArrayList getAreaByZoneId(int zone){        SQLiteDatabase db = this.openDataBase();        String query = "SELECT * FROM area_master WHERE zone_id = ?";        String[] args = new String[]{String.valueOf(zone)};        Cursor cur = db.rawQuery(query,args);        ArrayList list = new ArrayList();        cur.moveToFirst();        if(cur.getCount() > 0){            //0            list.add(cur.getInt(cur.getColumnIndex("id")));            //1            list.add(cur.getInt(cur.getColumnIndex("zone_id")));            //2            String str1 = cur.getString(cur.getColumnIndex("name"));            if(str1 == null){                list.add("");            }else{                list.add(str1);            }            //3            list.add(cur.getInt(cur.getColumnIndex("quest_count")));        }        cur.close();        db.close();        return list;    }    //idで取得する    public ArrayList getAreaById(int identifier){        SQLiteDatabase db = this.openDataBase();        String query = "SELECT * FROM area_master WHERE id = ?";        String[] args = new String[]{String.valueOf(identifier)};        Cursor cur = db.rawQuery(query,args);        ArrayList list = new ArrayList();        cur.moveToFirst();        if(cur.getCount() > 0){            //0            list.add(cur.getInt(cur.getColumnIndex("id")));            //1            list.add(cur.getInt(cur.getColumnIndex("zone_id")));            //2            String str1 = cur.getString(cur.getColumnIndex("name"));            if(str1 == null){                list.add("");            }else{                list.add(str1);            }            //3            list.add(cur.getInt(cur.getColumnIndex("quest_count")));        }        cur.close();        db.close();        return list;    }    //あるか    public boolean isArea(int identifier){        boolean isGet = false;        SQLiteDatabase db = this.openDataBase();        String query = "SELECT id FROM area_master where id = ?";        String[] args = new String[]{String.valueOf(identifier)};        Cursor cur = db.rawQuery(query,args);        if(cur.getCount() > 0){            isGet = true;        }        cur.close();        db.close();        return isGet;    }
    
	 }